<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Epoch Translator</title>
  <link rel="stylesheet" href="popup.css" />
</head>
<body>
  <div class="popup">
    <header class="header">
      <div class="brand">
        <img src="icons/icon48.png" alt="Epoch Translator icon" class="brand-icon" />
        <h1 class="brand-title">Epoch Translator</h1>
      </div>
      <nav class="tabs" role="tablist" aria-label="Conversion mode">
        <button id="tab-ts" class="tab active" role="tab" aria-selected="true" aria-controls="panel-ts">Timestamp → Date</button>
        <button id="tab-dt" class="tab" role="tab" aria-selected="false" aria-controls="panel-dt">Date → Timestamp</button>
      </nav>
    </header>

    <main>
      <!-- Timestamp → Date -->
      <section id="panel-ts" class="panel" role="tabpanel" aria-labelledby="tab-ts">
        <div class="field">
          <label for="tsInput">Unix Timestamp</label>
          <input id="tsInput" type="text" inputmode="numeric" placeholder="e.g., 1733788800 or 1733788800000" aria-describedby="tsHelp tsError" />
          <div id="tsHelp" class="help">Spaces and commas are ignored. Negative epochs supported.</div>
        </div>
        <div class="row">
          <fieldset class="segmented" aria-label="Units">
            <legend class="legend">Units</legend>
            <label class="seg-item">
              <input type="radio" name="units" id="unitsAuto" value="auto" checked />
              <span>Auto</span>
            </label>
            <label class="seg-item">
              <input type="radio" name="units" id="unitsSec" value="seconds" />
              <span>Seconds</span>
            </label>
            <label class="seg-item">
              <input type="radio" name="units" id="unitsMs" value="milliseconds" />
              <span>Milliseconds</span>
            </label>
          </fieldset>
          <div class="now-actions">
            <button id="nowSecondsBtn" class="btn ghost" type="button" title="Use current epoch seconds">Now (s)</button>
            <button id="nowMillisBtn" class="btn ghost" type="button" title="Use current epoch milliseconds">Now (ms)</button>
          </div>
        </div>
        <div id="tsError" class="error" role="alert" aria-live="polite"></div>

        <div class="outputs">
          <div class="output-card">
            <div class="output-title">UTC</div>
            <div class="output-line">
              <span class="label">ISO 8601</span>
              <code id="utcIso" class="code">—</code>
              <button class="btn tiny" data-copy-target="utcIso">Copy</button>
            </div>
            <div class="output-line">
              <span class="label">Friendly</span>
              <code id="utcFriendly" class="code">—</code>
              <button class="btn tiny" data-copy-target="utcFriendly">Copy</button>
            </div>
          </div>
          <div class="output-card">
            <div class="output-title">Local</div>
            <div class="output-line">
              <span class="label">ISO 8601</span>
              <code id="localIso" class="code">—</code>
              <button class="btn tiny" data-copy-target="localIso">Copy</button>
            </div>
            <div class="output-line">
              <span class="label">Friendly</span>
              <code id="localFriendly" class="code">—</code>
              <button class="btn tiny" data-copy-target="localFriendly">Copy</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Date → Timestamp -->
      <section id="panel-dt" class="panel hidden" role="tabpanel" aria-labelledby="tab-dt">
        <div class="grid-2">
          <div class="field">
            <label for="dateInput">Date</label>
            <input id="dateInput" type="date" aria-describedby="dtError" />
          </div>
          <div class="field">
            <label for="timeInput">Time</label>
            <input id="timeInput" type="time" step="1" placeholder="HH:MM:SS" aria-describedby="dtError" />
          </div>
        </div>
        <fieldset class="segmented" aria-label="Timezone">
          <legend class="legend">Interpretation</legend>
          <label class="seg-item">
            <input type="radio" name="tz" id="tzLocal" value="local" checked />
            <span>Local</span>
          </label>
          <label class="seg-item">
            <input type="radio" name="tz" id="tzUTC" value="utc" />
            <span>UTC</span>
          </label>
        </fieldset>

        <div id="dtError" class="error" role="alert" aria-live="polite"></div>

        <div class="outputs">
          <div class="output-card">
            <div class="output-title">Unix Timestamp</div>
            <div class="output-line">
              <span class="label">Seconds</span>
              <code id="tsSeconds" class="code">—</code>
              <button class="btn tiny" data-copy-target="tsSeconds">Copy</button>
            </div>
            <div class="output-line">
              <span class="label">Milliseconds</span>
              <code id="tsMilliseconds" class="code">—</code>
              <button class="btn tiny" data-copy-target="tsMilliseconds">Copy</button>
            </div>
          </div>
        </div>
      </section>
    </main>

    <div id="toast" class="toast" role="status" aria-live="polite"></div>
  </div>
  <script src="popup.js"></script>
</body>
</html>
